---
title: REST API
author:
  name: Park Cheol Hwi
  link: https://github.com/jcjfgnl9205
date: '2022-02-23'
categories: [RESTAPI]
tags: [RESTAPI]
pin: true
---

### API(application programming interface)とは

- コンピュータまたはアプリケーションが相互に通信する方法を説明する一連の定義済みルール


### APIの仕組み

1. クライアントアプリケーションは、要求とも呼ばれる情報を取得するためにAPIコールを開始する
2. 有効な要求を受信すると、APIは外部プログラムまたはWebサーバにコールを発信する
3. サーバは、要求された情報を含む応答をAPIに送信する
4. APIはデータを最初の要求アプリケーションに転送する


### REST(Representational State Transfer)とは

- Web上のコンピュータシステム間で標準を提供し、システム間の通信を容易にするアーキテクチャスタイル


### RESTの設計原則

1. 統一されたインターフェース
    - 同じリソースに対するすべてのAPIリクエストは、リクエストの送信元に関係なく、同じように見える必要がある
    - REST APIは、ユーザーの名前や電子メール・アドレスなど、同じデータが1つのURIだけに属するようにする。
    - クライアントが必要とする可能性のあるすべての情報が含まれている必要がある

2. クライアントとサーバーの分離
    - REST APIの設計では、クライアントとサーバーは互いに完全に独立している必要がある
    - クライアントは要求するリソースのURIのみを知っていればいい、サーバーと対話することはない
    - サーバーは要求されたデータをHTTPを介して渡すのみで、クライアントを変更することはない

3. ステートレス(Stateless)
    - 各リクエストには、その処理に必要なすべての情報を含める必要がある(サーバー側のセッションは不要)
    - サーバーは、クライアントのリクエストに関連するデータの保存を許可されていない

4. キャッシュ可能性
    - キャッシュが許可されている場合はクライアント側またはサーバー側でリソースのキャッシュが可能である必要がある
    - サーバーの応答には配信するリソースのキャッシュが許可されているかどうかに関する情報も含まれている必要がある
    - サーバー側のスケーラビリティーが向上すると同時に、クライアント側のパフォーマンスも改善される

5. 階層化されたシステム・アーキテクチャー
    - REST APIでは、呼び出しと応答は異なる階層を通過する 
    - クライアントとサーバーが互いに直接接続していると想定してしまうのはだめ(通信ループにはさまざまな中間システムが存在する可能性がある)
    - REST APIでは、クライアントとサーバーのいずれも、エンド・アプリケーションと中間システムのどちらと通信しているのかを判別できないように設計する必要がある

6. コードオンデマンド(オプション)
    - 通常、静的リソースを送信するが、場合によっては応答に実行可能コード（Javaアプレットなど）を含めることもできる（この場合、コードは必ずオンデマンドで実行する必要がある）


### REST APIの例

掲示板を作成して、リストを表示、更新、削除する時のURLを作成してみる

##### RESTAPI修正前

1. 掲示板を新規作成する：`/createBoard`

2. 掲示板の一覧を表示する：`/viewBoards`

3. no=1の掲示板の詳細を表示する：`/getBoard/1`

4. no=1の掲示板を削除する：`/deleteBoard/1`

5. no=1の掲示板を更新する：`/updateBoard/1`

6. 作成日が７月のリストを表示する：`/findBoardsFromThisMonth`

上記ように作成すると見づらいと思いますので下記条件を使用して作成する
- URLで動詞は使用しない
- HTTP methodsを利用してインタラクションする（GET, POST, PUT, DELETE, PATCH）
- Query Parameterを利用する

##### RESTAPI修正後

1. 掲示板を新規作成する：`POST /Board`

2. 掲示板の一覧を表示する：`GET /Boards`

3. no=1の掲示板の詳細を表示する：`GET /Board/1`

4. no=1の掲示板を削除する：`DELETE /Board/1`

5. no=1の掲示板を更新する：`PUT /Board/1`

6. 作成日が７月のリストを表示する：`/boards?release_date=7`


### reference
- <https://www.ibm.com/jp-ja/cloud/learn/rest-apis>
- <https://www.ibm.com/cloud/learn/api>
